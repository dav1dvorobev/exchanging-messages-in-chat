
# Программный комплекс для обмена сообщениями в чате

## Описание проекта

Данный проект представляет собой программный комплекс, реализованный на языке программирования C++, который обеспечивает обмен сообщениями между пользователями через компьютерную сеть в общем чате. Каждый участник видит сообщения всех остальных участников.

## Функциональные требования

### 1. Чтение конфигурационного файла

Клиентская часть читает конфигурационный файл `config.json`, для настройки определенных параметров. Конфигурационный файл содержит изменяемые параметры, такие как адрес и порт сервера,  путь к лог файлу, колличество предзагружаемых сообщений.

Пример структуры конфигурационного файла:
```json
{
	"server_address": "127.0.0.1",
	"port": 8080,
	"logging_path": "client.log",
	"preload_msgs": "10"
}
```

### 2. Авторизация при подключении

При подключении к чату осуществляется авторизация. Участники должны использовать только определенные логины и пароли для входа в чат, хранящиеся в файле `users.json`.

Пример организации данных:
```json
{
	"thedeepestreality" : "5y3k",
	"spogozhev" : "uts7d",
	"dav1dvorobev": "q8hp7"
}
```

### 3. Фиксация событий в лог-файле

Каждое событие, происходящее в чате, зафиксировано в лог-файле с указанием временной метки. Лог-файл необходим для расследования инцидентов в случае ошибок приложения.

Пример записи в лог-файле:
```
[14-11-2023 01:28:02] [INFO] SERVER START IN PORT 8080
[14-11-2023 13:12:38] [ERROR] FAILED BIND
```

### 4. Валидация сообщений

Для каждого сообщения осуществляется проверка на формат. Сообщение  считается допустимым, если, представляет собой строку длиной не более 64, содержащую только символы с кодом >= 32 и завершающуюся одним из символов: `.!?`.

## Технические детали работы серверной части

### Описание
Серверная часть проекта представляет собой реализацию с использованием 			TCP-сокетов. Реализованный интерфейс `ServerSocket`,  облегчает проверки и взаимодействие с серверным сокетом. На этапе инициализации объекта происходят все необходимые привязки и настройки для дальнейшей работы сервера с входящими соединениями.

###  Использование

Убедитесь что подключен заголовочный файл `"ServerSocket.h"`. Для работы сервера создайте объект `ServerSocket` в конструкторе которого укажите порт, на котором сервер будет слушать входящие подключения с любых адресов.

Пример использования `ServerSocket`:
```c++
#include  "ServerSocket.h"

#define PORT 8080

int  main(){
	ServerSocket serverSocket(PORT);
	std::cout << "server start in port " << serverSocket.port() << std::endl;
	return 0;
}
```
## Технические детали работы клиентской части

### Описание

Клиентская часть проекта представляет собой создание интерфейса `SocketShell` для удобной работы с сокетами. На этапе инициализации объекта происходят все необходимые привязки и подключения для дальнейшей работы с сервером. 

###  Использование

Убедитесь что подключен заголовочный файл `"SocketShell.h"`. Для работы с сокетом клиента создайте объект `SocketShell` в конструкторе которого укажите адрес и порт. 

Пример использования `SocketShell`:
```c++
#include  "SocketShell.h"
	
#define PORT 8080
#define ADDRESS "127.0.0.1"

int main(){
	SocketShell clientSocket(ADDRESS , PORT);
	return 0;
}
```
## Запуск приложения

### 1. Установка библиотеки для парсинга JSON

Для парсинга JSON в проекте используется библиотека [nlohmann/json](https://github.com/nlohmann/json). Для её установки выполните следующую команду:
	Для Linux (Ubuntu):
```bash
sudo apt-get install nlohmann-json-dev
```
**Для других операционных систем или сред** [инструкция по установке](https://json.nlohmann.me/)

### 2. Запуск приложения

После успешной установки библиотеки, вы сможете последовательно запустить серверную и клиентскую часть.
```bash
g++ server.cpp -o server -pthread && ./server
```
```bash
g++ client.cpp -o client -pthread && ./client
```
Убедитесь, что все компоненты установлены, и следуйте инструкциям в консоли для входа в чат и начала обмена сообщениями.